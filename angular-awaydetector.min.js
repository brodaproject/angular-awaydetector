!function(a,b,c){"use strict";function d(){var a={};return"undefined"!=typeof c.hidden?(a.hidden="hidden",a.eventName="visibilitychange",a.state="visibilityState"):"undefined"!=typeof c.mozHidden?(a.hidden="mozHidden",a.eventName="mozvisibilitychange",a.state="mozVisibilityState"):"undefined"!=typeof c.msHidden?(a.hidden="msHidden",a.eventName="msvisibilitychange",a.state="msVisibilityState"):"undefined"!=typeof c.webkitHidden&&(a.hidden="webkitHidden",a.eventName="webkitvisibilitychange",a.state="webkitVisibilityState"),a}function e(b,c,d){this.create=function(e){e=a.extend({},d,e);var g=new f(b,c,e);return g}}function f(b,e,f){function g(){var a=q.idleTimeout;if(k=(new Date).getTime()+a,null!=p)try{p.cancel()}catch(b){}p=e(l.makeIdle,a+50)}function h(){var a=q.awayTimeout;if(j=(new Date).getTime()+a,null!=n)try{n.cancel()}catch(b){}n=e(l.makeAway,a+50)}function i(a){l.setOptions(a),c.addEventListener(d().eventName,function(){c[d().state]===d().hidden?(k=j=(new Date).getTime(),l.makeIdle(),l.makeAway()):l.makeActive()},!1),b.on(["mousemove","mouseenter","scroll","keydown","click","dblclick"].join(" "),function(){l.makeActive()}),g(),h()}var j,k,l=this,m=!1,n=null,o=!1,p=null,q={},r={active:[],away:[],idle:[]};this.defaults={idleTimeout:5e3,awayTimeout:1e4},this.isIdle=function(){return o},this.isAway=function(){return m},this.isActive=function(){return!o&&!m},this.addCallback=function(a,b){switch(!0){case"idle"===a:case"away"===a:case"active"===a:r[a].push(b);break;default:throw new Error('"'+a+'" event is not supported by AwayDetector')}},this.makeIdle=function(){var a=(new Date).getTime();if(k>a)return void(p=e(l.makeIdle,k-a+50));try{if(!o)for(var b=0;b<r.idle.length;b++)r.idle[b]()}catch(c){}o=!0},this.makeAway=function(){var a=(new Date).getTime();if(j>a)return void(n=e(l.makeAway,j-a+50));try{if(!m)for(var b=0;b<r.away.length;b++)r.away[b]()}catch(c){}m=!0},this.makeActive=function(){var a=(new Date).getTime();k=a+q.idleTimeout,j=a+q.awayTimeout,o&&g(),m&&h();try{(o||m)&&e(function(){for(var a=0;a<r.active.length;a++)r.active[a]()},0)}catch(b){}o=!1,m=!1},this.setOption=function(a,b){q[a]=b,g(),h()},this.setOptions=function(b){q=a.extend({},l.defaults,q,b),g(),h()},this.getOption=function(a){return q[a]},this.getOptions=function(){return q},i(f)}e.prototype.constructor=e,e.prototype.listen=function(a){return this.create(a)},f.prototype.constructor=f,f.prototype.option=function(a,c){if(b.isString(a)){if(!b.isDefined(c))return this.getOption(a);this.setOption(a,c)}else{if(!b.isDefined(a))return this.getOptions();this.setOptions(a)}return this},f.prototype.on=function(a,b){return this.addCallback(a,b),this},b.module("broda.awayDetector",[],["$provide",function(a){a.provider("$awaylistener",function(){var a=this.defaults={idleTimeout:5e3,awayTimeout:1e4};this.$get=["$document","$timeout",function(b,c){return new e(b,c,a)}]})}]).directive("brdShowAway",["$awaylistener","$animate",function(a,c){return function(d,e,f){var g=a.listen();e.addClass("ng-hide"),g.on("away",function(){c.removeClass(e,"ng-hide")}).on("active",function(){c.addClass(e,"ng-hide")}),d.$watch(f.brdShowAway,function(a){b.isNumber(a)&&g.option("awayTimeout",a)})}}])}(window.jQuery,window.angular,window.document);